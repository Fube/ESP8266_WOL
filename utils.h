#ifndef UTILS_H_
#define UTILS_H_

#include <ESP8266WiFi.h>
#include <WiFiClientSecure.h>
#include <Wire.h>
#include <ArduinoJson.h>

#define NUM(off, mult) ((timeStampBuffer[(off)] - '0') * (mult))

const char CERT [] PROGMEM = R"CERT(
-----BEGIN CERTIFICATE-----
MIIEtTCCBFugAwIBAgIQB92CSGa8+bgtORFq2j6oXDAKBggqhkjOPQQDAjBKMQsw
CQYDVQQGEwJVUzEZMBcGA1UEChMQQ2xvdWRmbGFyZSwgSW5jLjEgMB4GA1UEAxMX
Q2xvdWRmbGFyZSBJbmMgRUNDIENBLTMwHhcNMjEwMTE5MDAwMDAwWhcNMjIwMTE4
MjM1OTU5WjBtMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDVNh
biBGcmFuY2lzY28xGTAXBgNVBAoTEENsb3VkZmxhcmUsIEluYy4xHjAcBgNVBAMT
FXNuaS5jbG91ZGZsYXJlc3NsLmNvbTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IA
BDUgWdwYKXa4YoCzMR4C/3LWirkxNgMFE2wwXs0oAmcd8aog30ZbkZywT12bdk2H
1v7Ac0j3Z8AhCwRNp2KRjYmjggL+MIIC+jAfBgNVHSMEGDAWgBSlzjfq67B1DpRn
iLRF+tkkEIeWHzAdBgNVHQ4EFgQUZTcbLts50dcwzRL55erNRQwMfIcwPAYDVR0R
BDUwM4ILZGlzY29yZC5jb22CFXNuaS5jbG91ZGZsYXJlc3NsLmNvbYINKi5kaXNj
b3JkLmNvbTAOBgNVHQ8BAf8EBAMCB4AwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsG
AQUFBwMCMHsGA1UdHwR0MHIwN6A1oDOGMWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNv
bS9DbG91ZGZsYXJlSW5jRUNDQ0EtMy5jcmwwN6A1oDOGMWh0dHA6Ly9jcmw0LmRp
Z2ljZXJ0LmNvbS9DbG91ZGZsYXJlSW5jRUNDQ0EtMy5jcmwwPgYDVR0gBDcwNTAz
BgZngQwBAgIwKTAnBggrBgEFBQcCARYbaHR0cDovL3d3dy5kaWdpY2VydC5jb20v
Q1BTMHYGCCsGAQUFBwEBBGowaDAkBggrBgEFBQcwAYYYaHR0cDovL29jc3AuZGln
aWNlcnQuY29tMEAGCCsGAQUFBzAChjRodHRwOi8vY2FjZXJ0cy5kaWdpY2VydC5j
b20vQ2xvdWRmbGFyZUluY0VDQ0NBLTMuY3J0MAwGA1UdEwEB/wQCMAAwggEGBgor
BgEEAdZ5AgQCBIH3BIH0APIAdwApeb7wnjk5IfBWc59jpXflvld9nGAK+PlNXSZc
JV3HhAAAAXccb5rAAAAEAwBIMEYCIQDaqNV2BOShtAr4Ts0N1HS1fyDcpurgpU8h
4XFtNfRj3AIhAJKSbie7mmqp4tgQ/9Lo/PEcnEN/S6jPv3QjI0TykZcxAHcAIkVF
B1lVJFaWP6Ev8fdthuAjJmOtwEt/XcaDXG7iDwIAAAF3HG+bFwAABAMASDBGAiEA
7mv9l+gSMqpIa4mL3oDC0M8eRp4gZmnJwbripQ6dMZMCIQDEIoRyfEhcxKGJHXrU
eyAJTVWmR92yC445w2KDPBYLSzAKBggqhkjOPQQDAgNIADBFAiBwNaaVCAPrxmIc
elT+geS1nd8yv746MGq8eoflkEndswIhAIh+/oJSmyoLJcngoKmP0NhRvty7toPW
b5t6a4m7H4Ht
-----END CERTIFICATE-----
)CERT";

void apiRequest(String &response, String apiEndPoint, String botToken);

char *stripStringTill(char c_to_search[], char searchIn[]);

char *getStringTill(char c_to_search[], char searchIn[]);

char* removeStuff(char str[], int beginstrip, int endstrip);

String getLatestMessage(String botToken, String channelId, char * destId);


#endif
